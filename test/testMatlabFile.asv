% Параметры решетки
N = 8;          % Число элементов
R = 1;           % Радиус решетки
d = 1.038;         % Расстояние между элементами (в долях длины волны)
phi0 = 0;         % Фаза возбуждения (в радианах)

% Параметры для построения диаграммы
theta = linspace(0, pi, 180);
phi = linspace(0, 2*pi, 360);
[THETA, PHI] = meshgrid(theta, phi);

% Вычисление диаграммы направленности
E = zeros(size(THETA));
for n = 1:N
    E = E + exp(1i*(2*pi*d*sin(THETA).*cos(PHI - 2*pi*(n-1)/N) + phi0));
end
D = abs(E).^2;

% Нормализация диаграммы
D = D./max(D(:));

% Построение диаграммы направленности
figure;
polar(THETA(:), D(:));
title('Диаграмма направленности круговой эквидистантной решетки');

% Дополнительные настройки
hold on;
plot(0, 1, 'r*');
hold off;